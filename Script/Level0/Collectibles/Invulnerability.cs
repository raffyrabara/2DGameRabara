using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    // Start is called before the first frame update

    public HeroManager heroPlayer;
    public GameObject potionDeact;
    SpriteRenderer heroRenderer;
    Color originalHeroColor;
    private Coroutine invulnerabilityCoroutine;
    [SerializeField] private AudioSource PotionSoundEffect;
    [SerializeField] private AudioSource PotionTalkSoundEffect;

    void Start()
    {
      heroRenderer = heroPlayer.GetComponent<SpriteRenderer> ();
      originalHeroColor = heroRenderer.material.color;
    }

  private void OnTriggerEnter2D(Collider2D collision)
  {
    potionDeact.transform.position = new Vector2 (potionDeact.transform.position.x, potionDeact.transform.position.y + 15f);
    PotionSoundEffect.Play();
    PotionTalkSoundEffect.Play();
    //if (col.gameObject.name.Equals ("Potion") && heroPlayer.health > 0)
        if (invulnerabilityCoroutine != null)
           StopCoroutine(invulnerabilityCoroutine);
           invulnerabilityCoroutine = StartCoroutine(GetInvulnerable());

  }
public IEnumerator GetInvulnerable()
    {
        Physics2D.IgnoreLayerCollision (8,9, true);
        Color invulnerableColor = originalHeroColor;
        invulnerableColor.a = 0.7f;
        heroRenderer.material.color = invulnerableColor;
        yield return new WaitForSeconds (3f);
        Physics2D.IgnoreLayerCollision (8,9, false);
        heroRenderer.material.color = originalHeroColor;
        //c.a = 1f;
       // rend.material.color = c;

    }

}
